
----------------
---ROLE
----------------
CREATE TABLE IF NOT EXISTS ROLES(
  ID_ROLE INT(11) NOT NULL AUTO_INCREMENT,
  NOMBRE VARCHAR(50) NOT NULL UNIQUE,
  PRIMARY KEY (ID_ROLE)
);

----------------
---USER
----------------
CREATE TABLE IF NOT EXISTS USERS (
  ID_USER INT(11) NOT NULL AUTO_INCREMENT,
  CORREO VARCHAR(50) NOT NULL,
  PW VARCHAR(50) NOT NULL ,
  NOMBRE VARCHAR(50) NOT NULL ,
  ID_ROLE INT(11) NOT NULL,
  PRIMARY KEY (ID_USER),
  CONSTRAINT FK_USER_ID_ROLE
    FOREIGN KEY (ID_ROLE)
    REFERENCES ROLES (ID_ROLE)
);

----------------
---CONTRIBUYENTES
----------------
CREATE TABLE IF NOT EXISTS CONTRIBUYENTES (
  ID_CONTRIBUYENTE INT(11) NOT NULL AUTO_INCREMENT,
  RFC VARCHAR(15) NOT NULL,
  GIRO VARCHAR(50) NOT NULL ,
  NOMBRE VARCHAR(50) NOT NULL ,
  CURP VARCHAR(20),
  RAZON_SOCIAL VARCHAR(100) ,
  REGIMEN_FISCAL VARCHAR(500) ,
  CALLE VARCHAR(100) ,
  NO_EXTERIOR VARCHAR(50) ,
  NO_INTERIOR VARCHAR(50) ,
  COLONIA VARCHAR(50) ,
  MUNICIPIO VARCHAR(50) ,
  LOCALIDAD VARCHAR(50) ,
  ESTADO VARCHAR(50) ,
  PAIS VARCHAR(50) ,
  COO VARCHAR(50) ,
  CODIGO_POSTAL VARCHAR(50) ,
  CORREO VARCHAR(100) ,
  TELEFONO VARCHAR(15) ,
  FECHA_CREACION TIMESTAMP,
  FECHA_ACTUALIZACION TIMESTAMP,
  PRIMARY  KEY (RFC)
);

----------------
---EMPRESAS
----------------
CREATE TABLE IF NOT EXISTS EMPRESAS (
  ID_EMPRESA INT(11) NOT NULL AUTO_INCREMENT,
  LINEA VARCHAR(50) ,
  RFC VARCHAR(15) NOT NULL,
  REFERENCIA VARCHAR(200) ,
  WEB VARCHAR(150),
  CONTACTO_ADMIN VARCHAR(50) ,
  SUCURSAL VARCHAR(50) ,
  LUGAR_EXPEDICION VARCHAR(100) ,
  LOGOTIPO BLOB NOT NULL,
  CERTIFICADO BLOB NOT NULL,
  LLAVE_PRIVADA BLOB NOT NULL,
  PW VARCHAR(50) ,
  ENCABEZADO VARCHAR(250) ,
  PIE_DE_PAGINA VARCHAR(250) ,
  PW_CORREO VARCHAR(50) ,
  ACTIVO TINYINT(1),
  FECHA_CREACION TIMESTAMP,
  FECHA_ACTUALIZACION TIMESTAMP,
  PRIMARY KEY (RFC)
);

----------------
---CLIENT
----------------
CREATE TABLE IF NOT EXISTS CLIENTES (
  ID_CLIENT INT(11) NOT NULL AUTO_INCREMENT,
  RFC VARCHAR(50) UNIQUE NOT NULL,
  ACTIVO TINYINT(1),
  FECHA_CREACION TIMESTAMP,
  FECHA_ACTUALIZACION TIMESTAMP,
  PRIMARY KEY (RFC)
);

----------------
---FACTURA
----------------
CREATE TABLE IF NOT EXISTS FACTURAS(
  ID_FACTURA INT(11) NOT NULL AUTO_INCREMENT,
  ID_CLIENT INT(11) NOT NULL,
  ID_EMPRESA INT(11) NOT NULL,
  FOLIO VARCHAR(40) NOT NULL UNIQUE,
  UUID VARCHAR(40),
  GIRO VARCHAR(100),
  USO_CDFI VARCHAR(100) NOT NULL,
  REGIMEN_FISCAL VARCHAR(100) NOT NULL,
  ID_STATUS_FACTURA INT(1) NOT NULL,
  TIPO_DOCUMENTO VARCHAR(50) NOT NULL,
  MONEDA VARCHAR(50) NOT NULL,
  FORMA_PAGO VARCHAR(150) NOT NULL,
  METODO_PAGO VARCHAR(150) NOT NULL,
  NOTAS VARCHAR(400) NOT NULL,
  CDFI_FLAG TINYINT(1),
  PAGO_TOTAL FLOAT(15) NOT NULL,
  TOTAL FLOAT(15) NOT NULL,
  SUB_TOTAL FLOAT(15) NOT NULL,
  IVA FLOAT(15) NOT NULL,
  FECHA_CREACION TIMESTAMP,
  FECHA_ACTUALIZACION TIMESTAMP,
  PRIMARY KEY (ID_FACTURA),
  CONSTRAINT FK_FACTURA_CLIENTE
    FOREIGN KEY (ID_CLIENT)
    REFERENCES CLIENTES(ID_CLIENT),
  CONSTRAINT FK_FACTURA_EMPRESA
    FOREIGN KEY (ID_EMPRESA)
    REFERENCES EMPRESAS(ID_EMPRESA)  
);

----------------
---CATALOGOS
----------------

CREATE TABLE IF NOT EXISTS CLAVE_UNIDAD(
	CLAVE VARCHAR(5) NOT NULL UNIQUE,
	TIPO VARCHAR(50) NOT NULL,
	DESCRIPCION VARCHAR(100),
	NOMBRE VARCHAR(50) NOT NULL
);

CREATE TABLE IF NOT EXISTS REGIMEN_FISCAL(
	CLAVE INT(10) NOT NULL UNIQUE,
	DESCRIPCION VARCHAR(100) NOT NULL,
	P_MORAL TINYINT(1) NOT NULL,
	P_FISICA TINYINT(1) NOT NULL,
	INICIO_VIGENCIA TIMESTAMP
);

CREATE TABLE IF NOT EXISTS USO_CFDI(
	CLAVE VARCHAR(10) NOT NULL UNIQUE,
	DESCRIPCION VARCHAR(100) NOT NULL,
	P_MORAL TINYINT(1) NOT NULL,
	P_FISICA TINYINT(1) NOT NULL,
	INICIO_VIGENCIA TIMESTAMP
);

CREATE TABLE IF NOT EXISTS CLAVE_PROD_SERV(
	CLAVE INT(10) NOT NULL UNIQUE,
	DESCRIPCION VARCHAR(500) NOT NULL,
	SIMILARES VARCHAR(500),
	INICIO_VIGENCIA TIMESTAMP
);

CREATE TABLE IF NOT EXISTS STATUS_FACTURAS(
	ID_STATUS_FACTURA INT(10) NOT NULL UNIQUE,
	STATUS_EVENTO VARCHAR(100) NOT NULL,
  STATUS_PAGO VARCHAR(100) NOT NULL,
	FECHA_CREACION TIMESTAMP,
  FECHA_ACTUALIZACION TIMESTAMP
);


CREATE TABLE IF NOT EXISTS GIROS(
	ID_GIRO INT(10) NOT NULL UNIQUE,
	NOMBRE VARCHAR(50) NOT NULL,
  FECHA_CREACION TIMESTAMP,
  FECHA_ACTUALIZACION TIMESTAMP
);